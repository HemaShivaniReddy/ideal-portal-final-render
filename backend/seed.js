import dotenv from 'dotenv'; import bcrypt from 'bcryptjs'; import connectDB from './config/db.js'; import User from './models/User.js'; dotenv.config(); await connectDB(); const email = process.env.SEED_MANAGER_EMAIL || 'admin@portal.com'; const password = process.env.SEED_MANAGER_PASSWORD || 'password123'; const name = process.env.SEED_MANAGER_NAME || 'Manager'; try{ let user = await User.findOne({email}); if(!user){ const hash = await bcrypt.hash(password,10); user = await User.create({name,email,password:hash,role:'manager'}); console.log('Created manager', email); } else if(user.role!=='manager'){ user.role='manager'; await user.save(); console.log('Updated to manager', email); } else { console.log('Manager exists', email); } }catch(e){ console.error(e) } finally { process.exit(0) }